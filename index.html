<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Próximamente - Fuled by Sunshine</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <div
        class="background-container"
        style="background-image: url('./assets/bgImg.webp');"
    >
        <div class="content-box">
            <h1 class="main-title">
              COOKING UP SOMETHING SPECIAL!
            </h1>

            <div id="countdown" class="countdown-grid">
                <div class="timer-item">
                    <div id="days" class="timer-value">00</div> 
                    <p class="timer-label">DAYS</p>
                </div>
                <div class="timer-item">
                    <div id="hours" class="timer-value">00</div>
                    <p class="timer-label">HOURS</p>
                </div>
                <div class="timer-item">
                    <div id="minutes" class="timer-value">00</div>
                    <p class="timer-label">MINS</p>
                </div>
                <div class="timer-item">
                    <div id="seconds" class="timer-value">00</div>
                    <p class="timer-label">SECONDS</p>
                </div>
            </div>

            <p class="subscribe-prompt">Be the first to know when we launch.</p>

            <form id="subscribeForm" class="subscribe-form">
                <input type="email" id="emailInput" name="email" placeholder="Your email address..." required class="email-input">
                <button type="submit" class="subscribe-button">SUBSCRIBE</button>
            </form>
            <p id="formMessage" class="form-message-style"></p>

            <div class="logo-container">
                <img src="./assets/hf.svg" alt="Fuled by Sunshine Logo" class="footer-logo">
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURACIÓN DE LA CUENTA REGRESIVA ---
        // ACTUALIZADO: Julio 30, 2025
        const countdownDate = new Date("Jul 30, 2025 23:59:59").getTime();

        const countdownFunction = setInterval(function() {
            const now = new Date().getTime();
            const distance = countdownDate - now;

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            const daysElem = document.getElementById("days");
            const hoursElem = document.getElementById("hours");
            const minutesElem = document.getElementById("minutes");
            const secondsElem = document.getElementById("seconds");

            if (daysElem) daysElem.innerHTML = String(days).padStart(2, '0');
            if (hoursElem) hoursElem.innerHTML = String(hours).padStart(2, '0');
            if (minutesElem) minutesElem.innerHTML = String(minutes).padStart(2, '0');
            if (secondsElem) secondsElem.innerHTML = String(seconds).padStart(2, '0');

            if (distance < 0) {
                clearInterval(countdownFunction);
                const countdownContainer = document.getElementById("countdown");
                if (countdownContainer) {
                     if (daysElem) daysElem.innerHTML = "00";
                     if (hoursElem) hoursElem.innerHTML = "00";
                     if (minutesElem) minutesElem.innerHTML = "00";
                     if (secondsElem) secondsElem.innerHTML = "00";
                }
            }
        }, 1000);

        // --- MANEJO DEL FORMULARIO DE SUSCRIPCIÓN (sin cambios aquí) ---
        const form = document.getElementById('subscribeForm');
        const formMessage = document.getElementById('formMessage');
        const emailInput = document.getElementById('emailInput');
        const submitButton = form.querySelector('.subscribe-button');
        const BACKEND_URL = '/api/subscribe';

        if (form) {
            form.addEventListener('submit', async function(event) {
                event.preventDefault();
                if (!emailInput.checkValidity()) {
                    formMessage.textContent = 'Please enter a valid email address.';
                    formMessage.style.color = 'var(--brand-yellow)';
                    return;
                }
                const originalButtonText = submitButton.textContent;
                submitButton.textContent = 'SENDING...';
                submitButton.disabled = true;
                formMessage.textContent = '';
                try {
                    const response = await fetch(BACKEND_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email: emailInput.value })
                    });
                    const result = await response.json().catch(() => ({}));
                    if (response.ok) {
                        formMessage.textContent = result.message || 'Thanks for subscribing!';
                        formMessage.style.color = 'var(--brand-yellow)';
                        emailInput.value = '';
                    } else {
                        formMessage.textContent = result.error || 'Oops! Something went wrong.';
                        formMessage.style.color = '#FF6B6B';
                    }
                } catch (error) {
                    formMessage.textContent = 'Could not connect. Please try again later.';
                    formMessage.style.color = '#FF6B6B';
                } finally {
                    submitButton.textContent = originalButtonText;
                    submitButton.disabled = false;
                    setTimeout(() => { if (formMessage) formMessage.textContent = ''; }, 5000);
                }
            });
        }
    </script>
</body>
</html>